{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\Y3S1\\\\322\\\\The-322Forum\\\\client\\\\src\\\\components\\\\screens\\\\Home.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { UserContext } from \"../../App\";\nimport { Link } from \"react-router-dom\";\n\nconst Home = () => {\n  _s();\n\n  const [data, setData] = useState([]);\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetch(\"/allpost\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      setData(result.posts);\n    });\n  }, []);\n\n  const likePost = id => {\n    fetch(\"/like\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postId: id\n      })\n    }).then(res => res.json()).then(result => {\n      //   console.log(result)\n      const newData = data.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const unlikePost = id => {\n    fetch(\"/unlike\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postId: id\n      })\n    }).then(res => res.json()).then(result => {\n      //   console.log(result)\n      const newData = data.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: data.map(item => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card home-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: item.postedBy.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-image\",\n          children: item.photo != \"\" && item.photo != \"No photo\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.photo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"material-icons\",\n            style: {\n              color: \"#64b5f6\"\n            },\n            children: \"favorite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), item.likes.includes(state._id) ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"material-icons\",\n            onClick: () => {\n              likePost(item._id);\n            },\n            children: \"thumb_up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"material-icons\",\n            onClick: () => {\n              unlikePost(item._id);\n            },\n            children: \"thumb_down\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: [item.likes.length, \" likes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: item.body\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Add a comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"ZmleO6q+fEEwrf8wTg379n8qMIw=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["E:/Y3S1/322/The-322Forum/client/src/components/screens/Home.js"],"names":["React","useState","useEffect","useContext","UserContext","Link","Home","data","setData","state","dispatch","fetch","headers","Authorization","localStorage","getItem","then","res","json","result","console","log","posts","likePost","id","method","body","JSON","stringify","postId","newData","map","item","_id","catch","err","unlikePost","postedBy","name","photo","color","likes","includes","length","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { UserContext } from \"../../App\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Home = () => {\r\n  const [data, setData] = useState([]);\r\n  const { state, dispatch } = useContext(UserContext);\r\n  useEffect(() => {\r\n    fetch(\"/allpost\", {\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        setData(result.posts);\r\n      });\r\n  }, []);\r\n\r\n  const likePost = id => {\r\n    fetch(\"/like\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postId: id\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        //   console.log(result)\r\n        const newData = data.map(item => {\r\n          if (item._id == result._id) {\r\n            return result;\r\n          } else {\r\n            return item;\r\n          }\r\n        });\r\n        setData(newData);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const unlikePost = id => {\r\n    fetch(\"/unlike\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postId: id\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        //   console.log(result)\r\n        const newData = data.map(item => {\r\n          if (item._id == result._id) {\r\n            return result;\r\n          } else {\r\n            return item;\r\n          }\r\n        });\r\n        setData(newData);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      {data.map(item => {\r\n        return (\r\n          <div className=\"card home-card\" key={item._id}>\r\n            <h5>{item.postedBy.name}</h5>\r\n\r\n            <div className=\"card-image\">\r\n              {item.photo != \"\" && item.photo != \"No photo\" ? (\r\n                <img src={item.photo} />\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"card-content\">\r\n              <i className=\"material-icons\" style={{ color: \"#64b5f6\" }}>\r\n                favorite\r\n              </i>\r\n              {item.likes.includes(state._id) ? (\r\n                <i\r\n                  className=\"material-icons\"\r\n                  onClick={() => {\r\n                    likePost(item._id);\r\n                  }}\r\n                >\r\n                  thumb_up\r\n                </i>\r\n              ) : (\r\n                <i\r\n                  className=\"material-icons\"\r\n                  onClick={() => {\r\n                    unlikePost(item._id);\r\n                  }}\r\n                >\r\n                  thumb_down\r\n                </i>\r\n              )}\r\n\r\n              <h6>{item.likes.length} likes</h6>\r\n              <h6>{item.title}</h6>\r\n              <p>{item.body}</p>\r\n              <input type=\"text\" placeholder=\"Add a comment\" />\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}